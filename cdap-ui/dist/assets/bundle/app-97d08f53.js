!function(e){console.time(e.name),angular.module(e.name,[angular.module(e.name+".features",[e.name+".feature.home",e.name+".feature.overview",e.name+".feature.login",e.name+".feature.dashboard",e.name+".feature.operation28",e.name+".feature.apps",e.name+".feature.data",e.name+".feature.admin",e.name+".feature.userprofile",e.name+".feature.foo"]).name,angular.module(e.name+".commons",[angular.module(e.name+".services",[e.name+".config","ngAnimate","ngSanitize","ngStorage","ui.router","cask-angular-window-manager","cask-angular-theme","cask-angular-focus"]).name,angular.module(e.name+".filters",[e.name+".services","cask-angular-capitalize"]).name,"cask-angular-sortable","cask-angular-confirmable","cask-angular-promptable","cask-angular-json-edit","mgcrea.ngStrap.alert","mgcrea.ngStrap.tooltip","mgcrea.ngStrap.popover","mgcrea.ngStrap.dropdown","mgcrea.ngStrap.typeahead","mgcrea.ngStrap.select","mgcrea.ngStrap.collapse","mgcrea.ngStrap.button","mgcrea.ngStrap.tab","mgcrea.ngStrap.modal","ncy-angular-breadcrumb","angularMoment"]).name,"angular-loading-bar"]).run(["$rootScope","$state","$stateParams",function(e,t,a){e.$state=t,e.$stateParams=a,window.$go=t.go}]).config(["$locationProvider",function(e){e.html5Mode(!0)}]).config(["$alertProvider",function(e){angular.extend(e.defaults,{animation:"am-fade-and-scale",container:"#alerts > .container",duration:3})}]).config(["$compileProvider",function(e){e.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|tel|file|blob):/)}]).config(["cfpLoadingBarProvider",function(e){e.includeSpinner=!1}]).config(["caskThemeProvider",function(e){e.setThemes(["cdap","default"])}]).run(["$rootScope","MYSOCKET_EVENT","$alert",function(e,t,a){e.$on(t.closed,function(e,t){a({title:"Error",content:t.reason||"could not connect to the server",type:"danger"})}),e.$on(t.message,function(e,t){t.statusCode>399&&a({title:t.statusCode.toString(),content:t.response||"Something went terribly wrong",type:"danger"}),t.warning&&a({content:t.warning,type:"warning"})})}]).controller("BodyCtrl",["$scope","caskTheme","CASK_THEME_EVENT",function(t,a,r){var n=a.getClassName();t.$on(r.changed,function(e,a){e.defaultPrevented||(t.bodyClass=t.bodyClass.replace(n,a),n=a)}),t.$on("$stateChangeSuccess",function(e,a){var r=[];if(a.data&&a.data.bodyClass)r=[a.data.bodyClass];else for(var s=a.name.split("."),o=s.length+1;1<o--;)r.push("state-"+s.slice(0,o).join("-"));r.push(n),t.bodyClass=r.join(" ")}),console.timeEnd(e.name)}])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".feature.apps",[e.name+".commons",e.name+".feature.programs"])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".feature.admin",[e.name+".commons"])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".feature.dashboard",[e.name+".commons","ui.sortable"])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".feature.datasets",[e.name+".commons"])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".feature.flows",[])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".feature.foo",[e.name+".commons"])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".feature.login",[e.name+".commons"])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".feature.home",[e.name+".commons"])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".feature.mapreduce",[e.name+".commons"])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".feature.operation28",[e.name+".commons",e.name+".feature.home"])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".feature.overview",[e.name+".commons"])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".feature.data",[e.name+".commons",e.name+".feature.datasets",e.name+".feature.streams"])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".feature.programs",[e.name+".commons",e.name+".feature.mapreduce",e.name+".feature.services",e.name+".feature.flows",e.name+".feature.workflows"])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".feature.streams",[e.name+".commons"])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".feature.services",[])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".feature.userprofile",[])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".feature.workflows",[])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".filters").filter("bytes",function(){return function(e,t){if(1>e||isNaN(parseFloat(e))||!isFinite(e))return"0b";"undefined"==typeof t&&(t=e>1023?1:0);var a=Math.floor(Math.log(e)/Math.log(1024));return(e/Math.pow(1024,Math.floor(a))).toFixed(t)+""+["b","kB","MB","GB","TB","PB"][a]}})}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".filters").filter("myEllipsis",function(){return function(e,t){return"string"==typeof e&&e.length>t?e.substr(0,t-1)+"… ":e}})}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".filters").filter("myNumber",function(){return function(e,t){if(1>e||isNaN(parseFloat(e))||!isFinite(e))return"0";"undefined"==typeof t&&(t=e>1023?1:0);var a=Math.floor(Math.log(e)/Math.log(1e3));return(e/Math.pow(1e3,Math.floor(a))).toFixed(t)+""+["","k","M","G","T","P"][a]}})}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".filters").filter("myTitleFilter",function(){return function(e){var t=e.data&&e.data.title;return(t?t+" | ":"")+"CDAP"}})}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".services").factory("myAppUploader",["myFileUploader","$state","$alert",function(e,t,a){function r(r,n){function s(){a({type:"success",title:"Upload success!",content:"The application has been uploaded successfully!"}),t.reload()}function o(e){a({type:"danger",title:"Upload failed!",content:e||""})}for(var l=0;l<r.length;l++)e.upload({path:"/namespaces/"+(t.params.namespace||n)+"/apps",file:r[l]}).then(s,o)}return{upload:r}}])}({name:"cdap-ui",v:"2.8.0"}),function(e){var t=angular.module(e.name+".services");t.constant("MYAUTH_EVENT",{loginSuccess:"myauth-login-success",loginFailed:"myauth-login-failed",logoutSuccess:"myauth-logout-success",sessionTimeout:"myauth-session-timeout",notAuthenticated:"myauth-not-authenticated",notAuthorized:"myauth-not-authorized"}),t.constant("MYAUTH_ROLE",{all:"*",user:"user",admin:"admin"}),t.run(["$location","$state","$rootScope","myAuth","MYAUTH_EVENT","MYAUTH_ROLE",function(e,t,a,r,n,s){a.$on("$stateChangeStart",function(o,l){var i=l.data&&l.data.authorizedRoles;if(i){var u=r.currentUser;if(u){if(i===s.all)return;if(u.hasRole(i))return}o.preventDefault(),t.go("login",{next:angular.toJson({path:e.path(),search:e.search()})}),a.$broadcast(u?n.notAuthorized:n.notAuthenticated)}})}]),t.service("myAuth",["MYAUTH_EVENT","MyAuthUser","myAuthPromise","$rootScope","$localStorage",function(e,t,a,r,n){var s=angular.bind(this,function(e){this.currentUser=e,r.currentUser=e});this.remembered=function(){var e=n.remember;return angular.extend({remember:!!e},e||{})},this.login=function(o){return a(o).then(function(a){var l=new t(a);s(l),n.remember=o.remember&&l.storable(),r.$broadcast(e.loginSuccess)},function(){r.$broadcast(e.loginFailed)})},this.logout=function(){s(null),r.$broadcast(e.logoutSuccess)},this.isAuthenticated=function(){return!!this.currentUser}}]),t.factory("myAuthPromise",["MY_CONFIG","$q","$http",function(e,t,a){return function(r){var n=t.defer();return e.securityEnabled?a({url:"/login",method:"POST",data:r}).success(function(e){n.resolve(angular.extend(e,{username:r.username}))}).error(function(e){n.reject(e)}):(console.warn("Security is disabled, logging in automatically"),n.resolve({username:r.username})),n.promise}}]),t.factory("MyAuthUser",["MYAUTH_ROLE",function(e){function t(t){this.token=t.access_token,this.username=t.username,this.role=e.user,"admin"===t.username&&(this.role=e.admin)}return t.prototype.hasRole=function(t){return this.role===e.admin?!0:(angular.isArray(t)||(t=[t]),-1!==t.indexOf(this.role))},t.prototype.storable=function(){return{username:this.username}},t}])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".services").factory("myFileUploader",["$q","$window","$alert","cfpLoadingBar","myAuth",function(e,t,a,r,n){function s(s){var o=e.defer();if(n.currentUser){var l=new t.XMLHttpRequest;l.upload.addEventListener("progress",function(e){"progress"===e.type&&console.info("App Upload in progress!")});var i=s.path;l.open("POST",i,!0),l.setRequestHeader("Content-type","application/octet-stream"),l.setRequestHeader("X-Archive-Name",s.file.name),l.setRequestHeader("Authorization","Bearer "+n.currentUser.token),l.send(s.file),r.start(),l.onreadystatechange=function(){4===l.readyState&&(l.status>399?o.reject(l.response):o.resolve(),r.complete())}}else o.reject(400),a({title:"Must specify user: ",content:"Could not find user.",type:"danger"});return o.promise}return{upload:s}}])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".services").factory("myHelpers",function(){function e(e,t,a){var r,n,s,o=e;if(t.indexOf(".")>-1)for(n=t.split("."),s=n.length-1,r=0;s>=r;r++)r!==s?(o[n[r]]=o[n[r]]||{},o=o[n[r]]):o[n[s]]=a;else e[t]=a;return e}function t(e,t){return a.apply(null,[e].concat(t.split(".")))}function a(e){if(!angular.isObject(e))return null;for(var t=1;t<arguments.length;t++)if(e=e[arguments[t]],!angular.isObject(e))return e;return e}return{deepSet:e,deepGet:t,objectQuery:a}})}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".services").service("myNamespace",["$q","MyDataSource",function(e,t){this.namespaceList=[];var a=new t,r=null;this.getList=function(t){return!t&&this.namespaceList.length?e.when(this.namespaceList):(r||(r=e.defer(),a.request({_cdapPath:"/namespaces",method:"GET"},function(e){e.length||(e=[{id:"default",name:"default"}]),this.namespaceList=e,r.resolve(e),r=null}.bind(this))),r.promise)},this.getDisplayName=function(e){var t=this.namespaceList.filter(function(t){return t.id===e});return t[0].name||e}}])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".services").factory("mySettings",["MyPersistentStorage",function(e){return new e("user")}]).factory("MyPersistentStorage",["$q","MyDataSource","myHelpers",function(e,t,a){function r(e){this.endpoint="/configuration/"+e,this.data={},this.pending=null}var n=new t;return r.prototype.set=function(t,r){var s=e.defer();return a.deepSet(this.data,t,r),n.request({method:"PUT",_cdapPath:this.endpoint,body:this.data},s.resolve),s.promise},r.prototype.get=function(t,r){var s=a.deepGet(this.data,t);if(!r&&s)return e.when(s);var o=this;if(this.pending){var l=e.defer();return this.pending.promise.then(function(){l.resolve(a.deepGet(o.data,t))}),l.promise}this.pending=e.defer(),n.request({method:"GET",_cdapPath:this.endpoint},function(e){o.data=e.property,o.pending.resolve(a.deepGet(o.data,t))});var i=this.pending.promise;return i["finally"](function(){o.pending=null}),i},r}])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".services").factory("myLocalStorage",["MyBrowserStorage",function(e){return new e("local")}]).factory("mySessionStorage",["MyBrowserStorage",function(e){return new e("session")}]).factory("MyBrowserStorage",["$q","$localStorage","$sessionStorage","myHelpers",function(t,a,r,n){function s(e){this.type=e,this.data="local"===e?a:r}return s.prototype.set=function(a,r){return"local"===this.type&&(a=e.name+"."+a),t.when(n.deepSet(this.data,a,r))},s.prototype.get=function(a){return"local"===this.type&&(a=e.name+"."+a),t.when(n.deepGet(this.data,a))},s}])}({name:"cdap-ui",v:"2.8.0"}),function(e){var t=angular.module(e.name+".commons"),a={restrict:"E",replace:!0,template:'<div class="epoch"></div>',scope:{history:"=",stream:"="},controller:"epochController"};t.factory("Epoch",["$window",function(e){return e.Epoch}]),t.controller("epochController",["$scope","$compile","caskWindowManager","Epoch",function(e,t,a,r){function n(){var a=e.options,n=angular.element(a.el).empty();console.log("[epoch]",e.type,a),e.me=new r._typeMap[e.type](a),e.me.draw(),t(n)(e)}e.initEpoch=function(t,a,r,s){if(!e.me){var o={};if(angular.forEach(r,function(t,a){if(t&&0===a.indexOf("chart")){var r=a.substring(5);this[r.charAt(0).toLowerCase()+r.slice(1)]=e.$eval(t)}},o),angular.extend(o,s||{},{data:angular.copy(e.history),el:t[0]}),o.data||(o.data=[{values:[{time:Math.floor(Date.now()/1e3),y:0}]}]),e.type=a,e.options=o,r.history){var l=!1;e.$watch("history",function(t){t&&(e.options.data=t,l||(l=!0,n()))})}n(),r.stream&&e.$watch("stream",function(t){if(e.me)if("time.gauge"===a)e.me.update(t);else if(t&&t.length)for(var r=0;r<t.length;r++)e.me.push([t[r]])})}},e.$on(a.event.resize,n)}]),t.directive("epochPie",function(){return angular.extend({link:function(e,t,a){e.initEpoch(t,"pie",a)}},a)}),t.directive("epochBar",function(){return angular.extend({link:function(e,t,a){e.initEpoch(t,"time.bar",a)}},a)}),t.directive("epochLine",function(){return angular.extend({link:function(e,t,a){e.initEpoch(t,"time.line",a)}},a)}),t.directive("epochArea",function(){return angular.extend({link:function(e,t,a){e.initEpoch(t,"time.area",a)}},a)}),t.directive("epochGauge",function(){return angular.extend({link:function(e,t,a){e.initEpoch(t,"time.gauge",a,{domain:[0,1e3],format:function(e){return e.toFixed(2)}})}},a)})}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".commons").directive("myFileSelect",["$parse",function(e){return{restrict:"E",scope:!0,templateUrl:"fileselect/fileselect.html",link:function(t,a,r){t.buttonLabel=r.buttonLabel||"Upload",t.buttonIcon=r.buttonIcon||"fa-upload",t.buttonClass=r.buttonClass||"",t.buttonDisabled=!!r.buttonDisabled||!1;var n=angular.element('<input class="sr-only" type="file" multiple="true">');a.append(n),a.bind("click",function(){n[0].click()});var s=e(r.onFileSelect);n.bind("change",function(e){s(t,{$files:e.target.files}),this.value=null})}}}])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".commons").directive("myInstanceControl",["$alert",function(e){return{restrict:"E",controller:"instanceControlController",scope:{model:"=",basePath:"="},templateUrl:"instance-control/instance-control.html",link:function(t){t.processing=!1,t.handleSet=function(){return t.processing=!0,void 0===t.model.requested||t.model.requested<0?(e({title:"Invalid instances: ",content:"you must request a valid number of instances.",type:"danger"}),void(t.processing=!1)):void t.myDataSrc.request({method:"PUT",_cdapPathV2:t.basePath+"/instances",body:{instances:t.model.requested}}).then(function(){t.model.provisioned=t.model.requested},function(){})["finally"](function(){t.processing=!1})}}}}]).controller("instanceControlController",["$scope","MyDataSource",function(e,t){e.myDataSrc=new t(e)}])}({name:"cdap-ui",v:"2.8.0"}),function(e){var t=angular.module(e.name+".commons");t.factory("d3",["$window",function(e){return e.d3}]),t.factory("dagreD3",["$window",function(e){return e.dagreD3}]),t.directive("myFlowGraph",["d3","dagreD3","$state","$filter",function(e,t,a,r){return{restrict:"E",templateUrl:"flow-graph/flow.html",scope:{model:"="},controller:["$scope",function(e){function t(t){angular.isObject(t)&&Object.keys(t).length&&e.render()}e.$watch("model",t),e.$watchCollection("model.metrics",t)}],link:function(n){n.render=function(){function s(e,t){var a=t,r=(e.toString().length-1)*a/2;return a+r}function o(e){if(!a.includes("**.workflows.**")){u(e);var t=d[e];"STREAM"===t.type?a.go("flows.detail.runs.tabs.status.streamsDetail",{streamId:e}):a.go("flows.detail.runs.tabs.status.flowletsDetail",{flowletId:e})}}function l(e){return d[e].instances?d[e].instances:0}function i(e){k.html(function(){return"<strong>"+d[e].type+':</strong> <span class="tip-node-name">'+e+"</span>"}).show()}function u(){k.hide()}var c=n.model.nodes,m=n.model.edges,d={},p={},f=r("myNumber"),h=new t.render,g=new t.graphlib.Graph,v=25,y=10,w=60,b=5,$=40,S=30,P=30;g.setGraph({nodesep:60,ranksep:70,rankdir:"LR",marginx:30,marginy:30}).setDefaultEdgeLabel(function(){return{}}),angular.forEach(c,function(e){var t=e.name.length>8?e.name.substr(0,5)+"...":e.name;d[e.name]=e,p[t]=e,"STREAM"===e.type?g.setNode(e.name,{shape:"stream",label:t}):g.setNode(e.name,{shape:"flowlet",label:t})}),angular.forEach(m,function(e){g.setEdge(e.sourceName,e.targetName)}),h.shapes().flowlet=function(e,a,r){var o=l(r.elem.__data__),i=s(o,y),u=e.insert("circle",":first-child").attr("x",-a.width/2).attr("y",-a.height/2).attr("r",w).attr("class","flow-shapes foundation-shape flowlet-svg");return e.insert("circle").attr("cx",w-i).attr("cy",-P).attr("r",i).attr("class","flow-shapes flowlet-instances"),e.insert("text").attr("x",w-i).attr("y",-P+b).text(o).attr("class","flow-shapes flowlet-instance-count"),e.insert("circle").attr("cx",-w).attr("r",v).attr("class","flow-shapes flowlet-events"),e.insert("text").attr("x",-w).attr("y",b).text(f(n.model.metrics[p[r.label].name])).attr("class","flow5shapes flowlet-event-count"),r.intersect=function(e){return t.intersect.circle(r,w,e)},u},h.shapes().stream=function(e,a,r){var s=a.width,o=a.height,l=[{x:-$,y:S},{x:-$,y:-o-S},{x:s/2,y:-o-S},{x:s,y:-o/2},{x:s/2,y:S}],i=e.insert("polygon",":first-child").attr("points",l.map(function(e){return e.x+","+e.y}).join(" ")).attr("transform","translate("+-s/8+","+1*o/2+")").attr("class","flow-shapes foundation-shape stream-svg"),u=i.node().getBBox().width,c=-1*u/2;return e.append("circle").attr("cx",c).attr("r",v).attr("class","flow-shapes stream-events"),e.append("text").attr("x",c).attr("y",b).text(f(n.model.metrics[p[r.label].name])).attr("class","flow-shapes stream-event-count"),r.intersect=function(e){return t.intersect.polygon(r,l,e)},i};var C=e.select("svg").attr("fill","white"),T=e.select("svg g"),k=e.tip().attr("class","d3-tip").offset([-10,0]);C.call(k);var N=e.behavior.zoom().on("zoom",function(){T.attr("transform","translate("+e.event.translate+")scale("+e.event.scale+")")});h(e.select("svg g"),g),C.selectAll("g.node").on("click",o),C.selectAll("g.node text").on("mouseover",i).on("mouseout",u);var I=1.1,U=C.node().getBoundingClientRect().width;N.translate([(U-g.graph().width*I)/2,20]).scale(I).event(C),C.attr("height",g.graph().height*I+40)}}}}])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".commons").directive("myLogViewer",["$filter","$timeout","$state","$location",function(e,t,a,r){var n=e("caskCapitalizeFilter"),s=e("filter");return{restrict:"E",scope:{model:"="},templateUrl:"log-viewer/log-viewer.html",controller:["$scope",function(e){e.filters="all,info,warn,error,debug,other".split(",").map(function(e){var t;switch(e){case"all":t=function(){return!0};break;case"other":t=function(e){return!/- (INFO|WARN|ERROR|DEBUG)/.test(e.log)};break;default:t=function(t){return new RegExp("- "+e.toUpperCase()).test(t.log)}}return{key:e,label:n(e),entries:[],predicate:t}}),e.$watch("model",function(t){angular.forEach(e.filters,function(e){e.entries=s(t,e.predicate)})})}],link:function(e,n){var o=angular.element(n[0].querySelector(".terminal")),l="filter";e.setFilter=function(n){var i=s(e.filters,{key:n});e.activeFilter=i.length?i[0]:e.filters[0],t(function(){if(o.prop("scrollTop",o.prop("scrollHeight")),!1===a.current.reloadOnSearch){var t={};t[l]=e.activeFilter.key,r.search(t)}})},e.setFilter(a.params[l])}}}])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".commons").directive("myMetricPicker",["MyDataSource","$stateParams","$log",function(e,t,a){function r(e){var a=[t.namespace,"namespace"].join(" ");e.available={contexts:[],types:["system",a],names:[]},e.metric={context:"",type:a,name:""}}var n=new e;return r.$inject=["$scope"],{restrict:"E",require:"ngModel",scope:{},templateUrl:"metric-picker/metric-picker.html",controller:r,link:function(e,r,s,o){function l(){var r;return"system"===e.metric.type?r="system":(r=t.namespace,r||(r="default",a.warn("metric-picker using default namespace as context!"))),"namespace."+r}function i(){var t=l(),a=t.length+1,r=t;e.metric.context&&(r+="."+e.metric.context),e.available.contexts=[],n.request({method:"POST",_cdapPath:"/metrics/search?target=childContext&context="+encodeURIComponent(r)},function(t){e.available.contexts=t.map(function(t){return{value:t.substring(a),display:t.substring(a+e.metric.context.length)}}).filter(function(e){return e.display})}),e.available.names=[],n.request({method:"POST",_cdapPath:"/metrics/search?target=metric&context="+encodeURIComponent(r)},function(t){e.available.names=t})}void 0!==s.required&&(r.find("input").attr("required",!0),o.$validators.metricAndContext=function(e,t){var a=e||t;return a&&a.name&&a.context});var u=o.$setTouched.bind(o);r.find("button").on("blur",u),r.find("input").on("blur",u),e.$watchCollection("metric",function(t,a){return o.$validate(),t.type!==a.type?(e.metric.context="",e.metric.name="",void i()):(t.context!==a.context&&(e.metric.name="",i()),void(t.context&&t.name?o.$setViewValue({context:l()+"."+t.context,name:t.name}):o.$dirty&&o.$setViewValue(null)))}),i()}}}])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".commons").directive("myNavbar",["$dropdown","myAuth","caskTheme","MY_CONFIG",function(e,t,a,r){return{restrict:"A",templateUrl:"navbar/navbar.html",controller:"navbarCtrl",link:function(n,s){var o=s[0].querySelectorAll("a.dropdown-toggle");e(angular.element(o[0]),{template:"navbar/namespace.html",animation:"am-flip-x",scope:n}),e(angular.element(o[1]),{template:"navbar/dropdown.html",animation:"am-flip-x",placement:"bottom-right",scope:n}),n.logout=t.logout,n.theme=a,n.securityEnabled=r.securityEnabled}}}])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".commons").controller("navbarCtrl",["$alert","MYAUTH_EVENT","myNamespace","$scope","$state",function(e,t,a,r){function n(){a.getList().then(function(e){r.namespaces=e})}r.namespaces=[],r.$on(t.loginSuccess,n),r.getDisplayName=a.getDisplayName.bind(a),r.$on(t.logoutSuccess,function(){r.namespaces=[]}),r.$on("$stateChangeSuccess",function(e,t,a,s){r.highlightTab=t.data&&t.data.highlightTab,"admin.namespace.create"===s.name&&n()}),r.doSearch=function(){e({title:"Sorry!",content:"Search is not yet implemented.",type:"danger"})}}])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".commons").directive("myProgramHistory",function(){return{restrict:"EA",scope:{model:"=runs"},templateUrl:"program-history/program-history.html",controller:["$scope",function(e){e.$watch("model",function(t){angular.isArray(t)&&(e.runs=t.map(function(e){return angular.extend({duration:e.end?e.end-e.start:0},e)}))})}]}})}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".commons").controller("myTabsCtrl",["$scope","$state",function(e,t){function a(){var a=e.tabs.map(function(e){return e.state}).indexOf(t.params.tab);(0>a||a>=e.tabs.length)&&(a=0),e.tabs.activeTab=a}e.tabs=e.tabsList().map(function(t){return{title:t,state:t.toLowerCase(),partial:e.tabsPartialPath+t.toLowerCase()+".html"}}),e.$watch("tabs.activeTab",function(a){t.go(t.includes("**.tab")?t.current:".tab",{tab:e.tabs[a].state})}),e.$on("$stateChangeSuccess",a),a()}])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".commons").directive("myTabs",function(){return{restrict:"EA",scope:{tabsPartialPath:"@",tabsList:"&"},controller:"myTabsCtrl",templateUrl:"tabs/mytabs.html"}})}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".feature.admin").config(["$stateProvider","$urlRouterProvider","MYAUTH_ROLE",function(e,t,a){e.state("admin",{"abstract":!0,data:{authorizedRoles:a.all,highlightTab:"management"},url:"/admin",templateUrl:"/assets/features/admin/templates/admin.html",controller:"AdminController"}).state("admin.overview",{url:"",templateUrl:"/assets/features/admin/templates/overview.html",controller:"AdminOverviewController"}).state("admin.system",{"abstract":!0,url:"/system",template:"<ui-view/>"}).state("admin.system.overview",{url:"",templateUrl:"/assets/features/admin/templates/system.html"}).state("admin.system.instance",{url:"/instance",templateUrl:"/assets/features/admin/templates/system/instance.html",controller:"AdminInstanceController"}).state("admin.system.services",{url:"/services",templateUrl:"/assets/features/admin/templates/system/services.html",controller:"AdminServicesController"}).state("admin.system.services.detail",{parent:"admin.system",url:"/services/detail/:serviceName",templateUrl:"/assets/features/admin/templates/system/service-detail.html",controller:"AdminServiceDetailController"}).state("admin.system.services.detail.metadata",{url:"/metadata",templateUrl:"/assets/features/admin/templates/partials/service-detail-metadata.html"}).state("admin.system.services.detail.logs",{url:"/logs?filter",reloadOnSearch:!1,template:'<my-log-viewer data-model="logs"></my-log-viewer>',controller:"AdminServiceLogController"}).state("admin.system.notifications",{url:"/notifications",templateUrl:"/assets/features/admin/templates/system/notifications.html"}).state("admin.security",{"abstract":!0,url:"/security",template:"<ui-view/>"}).state("admin.security.overview",{url:"",templateUrl:"/assets/features/admin/templates/security.html"}).state("admin.security.permissions",{url:"/permissions",templateUrl:"/assets/features/admin/templates/security/permissions.html"}).state("admin.security.tokens",{url:"/tokens",templateUrl:"/assets/features/admin/templates/security/tokens.html"}).state("admin.security.tokens.revoke",{onEnter:["$state","$modal",function(e,t){t({template:"/assets/features/admin/templates/partials/revoke-tokens.html"}).$promise.then(function(){e.go("^",e.params)})}]}).state("admin.security.logs",{url:"/logs",templateUrl:"/assets/features/admin/templates/security/logs.html",controller:"AdminAuditLogsController"}).state("admin.namespace",{"abstract":!0,url:"/namespace",resolve:{nsList:["myNamespace",function(e){return e.getList(!0)}]},template:"<ui-view/>"}).state("admin.namespace.create",{url:"/create",templateUrl:"/assets/features/admin/templates/namespace/create.html",controller:"AdminNamespaceCreateController"}).state("admin.namespace.detail",{url:"/detail/:nsadmin",templateUrl:"/assets/features/admin/templates/namespace.html"}).state("admin.namespace.detail.metadata",{url:"/metadata",templateUrl:"/assets/features/admin/templates/namespace/metadata.html",controller:"AdminNamespaceMetadataController"}).state("admin.namespace.detail.settings",{url:"/settings",templateUrl:"/assets/features/admin/templates/namespace/settings.html"}).state("admin.namespace.detail.users",{url:"/users",templateUrl:"/assets/features/admin/templates/namespace/users.html"}).state("admin.namespace.detail.datatypes",{url:"/datatypes",templateUrl:"/assets/features/admin/templates/namespace/datatypes.html",controller:"AdminDatatypesController"}).state("admin.namespace.detail.datasets",{url:"/datasets",templateUrl:"/assets/features/admin/templates/namespace/datasets.html",controller:"AdminDatasetsController"}).state("admin.namespace.detail.apps",{url:"/apps",templateUrl:"/assets/features/admin/templates/namespace/apps.html",controller:"AdminNamespaceAppController"}).state("admin.namespace.detail.apps.metadata",{parent:"admin.namespace.detail",url:"/:appId",templateUrl:"/assets/features/admin/templates/namespace/app-metadata.html",controller:"AdminNamespaceAppMetadataController"})}])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".feature.apps").config(["$stateProvider","$urlRouterProvider","MYAUTH_ROLE",function(e,t,a){e.state("apps",{"abstract":!0,template:"<ui-view/>",url:"/apps",data:{authorizedRoles:a.all,highlightTab:"development"},parent:"ns"}).state("apps.list",{url:"",templateUrl:"/assets/features/apps/templates/list.html",controller:"CdapAppListController",ncyBreadcrumb:{label:"Applications",parent:"overview"}}).state("apps.detail",{url:"/:appId","abstract":!0,template:"<ui-view/>"}).state("apps.detail.overview",{url:"/overview",parent:"apps.detail",templateUrl:"/assets/features/apps/templates/detail.html",ncyBreadcrumb:{parent:"apps.list",label:"{{$state.params.appId}}"}}).state("apps.detail.overview.tab",{url:"/:tab",ncyBreadcrumb:{skip:!0}})}])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".feature.dashboard").factory("MyDashboardsModel",["Widget","MyDataSource","mySettings","$q",function(e,t,a,r){function n(t){t=t||{},angular.extend(this,{id:t.id,title:t.title||"Dashboard",columns:[]}),angular.isArray(t.columns)?angular.forEach(t.columns,function(t){this.push(t.map(function(t){return new e(t)}))},this.columns):this.columns.push([])}function s(e){var t=[],s=this,i=r.defer();t.activeIndex=0,this.data=t,this.$promise=i.promise,this._key="dashsbyns",e&&(this._key+="."+e),a.get(this._key).then(function(t){return angular.isArray(t)||(t=[]),r.all(t.map(function(t){return o.request({method:"GET",_cdapPath:"/namespaces/"+e+l+"/"+t})}))}).then(function(e){e.length&&angular.forEach(e,function(e){var a=e.config;a.id=e.id,t.push(new n(a))}),i.resolve(s)})}var o=new t,l="/configuration/dashboards";return n.prototype.renameWidget=function(e,t){t&&(e.title=t,this.persist())},n.prototype.removeWidget=function(e){var t=this;angular.forEach(t.columns,function(a,r){t.columns[r]=a.filter(function(t){return e!==t})}),this.persist()},n.prototype.addWidget=function(t){for(var a,r=this.columns,n=0,s=0;s<r.length;s++){var o=r[s].length;(void 0===a||a>o)&&(a=o,n=s)}t=t||new e({title:"just added"}),this.columns[n].unshift(t),this.persist()},n.prototype.rename=function(e){e&&(this.title=e,this.persist())},n.prototype.properties=function(){return angular.fromJson(angular.toJson(this))},n.prototype.persist=function(){var e=this.properties();return this.id?o.request({method:"PUT",_cdapNsPath:l+"/"+this.id,body:e}):o.request({method:"POST",_cdapNsPath:l,body:e},function(e){this.id=e.id}.bind(this))},s.prototype.current=function(){return this.data[this.data.activeIndex||0]},s.prototype.persist=function(){return a.set(this._key,this.data.map(function(e){return e.id}))},s.prototype.remove=function(e){var t=this.data.splice(e,1)[0];o.request({method:"DELETE",_cdapNsPath:l+"/"+t.id}),this.persist()},s.prototype.reorder=function(e){var t=this.data.length-1,a=this.data.activeIndex,r=a+(e?-1:1);return r>t?r=0:0>r&&(r=t),this.data.splice(r,0,this.data.splice(a,1)[0]),this.persist(),r},s.prototype.add=function(t,a){for(var r=new n(t),s=1;(a||3)>s;s++)r.columns.push([]);return r.columns[0].push(new e({type:"welcome"})),this.data.unshift(r),r.persist().then(function(){return this.persist()}.bind(this))},s}])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".feature.dashboard").config(["$stateProvider","$urlRouterProvider","MYAUTH_ROLE",function(e,t,a){e.state("dashboard",{data:{authorizedRoles:a.all,highlightTab:"operations"},parent:"ns",url:"/dashboard/:tab",templateUrl:"/assets/features/dashboard/main.html",controller:"DashboardCtrl",resolve:{rDashboardsModel:["$stateParams","MyDashboardsModel",function(e,t){return new t(e.namespace).$promise}]}}).state("dashboard.addwdgt",{onEnter:["$state","$modal","$rootScope","rDashboardsModel",function(e,t,a,r){var n=a.$new();n.currentDashboard=r.current(),t({template:"/assets/features/dashboard/partials/addwdgt.html",scope:n}).$promise.then(function(){e.go("^",e.params)})}]})}])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".feature.dashboard").factory("Widget",["MyDataSource",function(e){function t(e){e=e||{},this.title=e.title||"Widget",this.type=e.type,this.metric=e.metric||!1}var a=new e;return t.prototype.fetchData=function(){this.metric&&a.request({_cdapPath:"/metrics/query?context="+encodeURIComponent(this.metric.context)+"&metric="+encodeURIComponent(this.metric.name)+"&start=now-60s&end=now",method:"POST"},function(e){if(e.series&&e.series.length){var t=e.series[0];t.splice(t.length-1,1),this.data=t}}.bind(this))},t.prototype.getPartial=function(){return"/assets/features/dashboard/widgets/"+this.type+".html"},t.prototype.getClassName=function(){return"panel-default widget widget-"+this.type},t}]).controller("WidgetTimeseriesCtrl",["$scope",function(e){e.wdgt.fetchData(),e.$watch("wdgt.data",function(t){angular.isArray(t)&&(e.chartHistory=[{label:e.wdgt.metric.name,values:t.map(function(e){return{time:e.time,y:e.value}
})}])})}]).controller("WidgetPieCtrl",["$scope","$alert","MyDataSource",function(e,t){t({content:"pie chart using fake data",type:"warning"}),e.pieChartData=[{label:"Slice 1",value:10},{label:"Slice 2",value:20},{label:"Slice 3",value:40},{label:"Slice 4",value:30}]}])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".feature.data").controller("CdapDataListController",["$state","$scope","MyDataSource",function(e,t,a){var r=new a(t);t.dataList=[],r.request({_cdapNsPath:"/streams"}).then(function(e){t.dataList=e.map(function(e){return e.dataType="Stream",e}).concat(t.dataList)}),r.request({_cdapNsPath:"/data/datasets"}).then(function(e){t.dataList=e.map(function(e){return e.dataType="Dataset",e}).concat(t.dataList)}),t.goToDetail=function(t){"Dataset"===t.dataType?e.go("datasets.detail.overview",{datasetId:t.name}):"Stream"===t.dataType&&e.go("streams.detail.overview",{streamId:t.id})},t.goToList=function(t){"Dataset"===t.dataType?e.go("datasets.list"):"Stream"===t.dataType&&e.go("streams.list")}}])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".feature.data").config(["$stateProvider","$urlRouterProvider","MYAUTH_ROLE",function(e,t,a){e.state("data",{"abstract":!0,template:"<ui-view/>",url:"/data",data:{authorizedRoles:a.all,highlightTab:"development"},parent:"ns"}).state("data.list",{url:"",templateUrl:"/assets/features/data/list.html",controller:"CdapDataListController",ncyBreadcrumb:{label:"Data",parent:"overview"}})}])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".feature.datasets").config(["$stateProvider","$urlRouterProvider","MYAUTH_ROLE",function(e,t,a){e.state("datasets",{"abstract":!0,template:"<ui-view/>",url:"/datasets",data:{authorizedRoles:a.all,highlightTab:"development"},parent:"ns"}).state("datasets.list",{url:"",templateUrl:"/assets/features/datasets/templates/list.html",controller:"CdapDatasetsListController",ncyBreadcrumb:{label:"Datasets",parent:"data.list"}}).state("datasets.detail",{url:"/:datasetId","abstract":!0,template:"<ui-view/>"}).state("datasets.detail.overview",{url:"/overview",parent:"datasets.detail",templateUrl:"/assets/features/datasets/templates/detail.html",ncyBreadcrumb:{parent:"data.list",label:"{{$state.params.datasetId | caskCapitalizeFilter}}"}}).state("datasets.detail.overview.tab",{url:"/:tab",ncyBreadcrumb:{skip:!0}})}])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".feature.flows").config(["$stateProvider","$urlRouterProvider","MYAUTH_ROLE",function(e,t,a){e.state("flows",{url:"/flows","abstract":!0,parent:"programs",data:{authorizedRoles:a.all,highlightTab:"development"},template:"<ui-view/>"}).state("flows.list",{url:"/list",templateUrl:"/assets/features/flows/templates/list.html",controller:"FlowsListController",ncyBreadcrumb:{skip:!0}}).state("flows.detail",{url:"/:programId",templateUrl:"/assets/features/flows/templates/detail.html",controller:"FlowsDetailController",onEnter:["$state","$timeout",function(e,t){t(function(){e.is("flows.detail")&&e.go("flows.detail.runs")})}],ncyBreadcrumb:{parent:"apps.detail.overview",label:"{{$state.params.programId }}"}}).state("flows.detail.runs",{url:"",templateUrl:"/assets/features/flows/templates/tabs/runs.html",controller:"FlowsDetailRunController",ncyBreadcrumb:{skip:!0}}).state("flows.detail.runs.tabs",{url:"/runs/:runId",template:"<ui-view/>","abstract":!0}).state("flows.detail.runs.tabs.status",{url:"/status",templateUrl:"/assets/features/flows/templates/tabs/runs/status.html",controller:"FlowsDetailRunStatusController",ncyBreadcrumb:{parent:"apps.detail.overview",label:"{{$state.params.programId}} / {{$state.params.runId}}"}}).state("flows.detail.runs.tabs.status.flowletsDetail",{url:"/:flowletId",templateUrl:"/assets/features/flows/templates/tabs/runs/flowlets/detail.html",controller:"FlowsFlowletDetailController",ncyBreadcrumb:{skip:!0}}).state("flows.detail.runs.tabs.status.streamsDetail",{url:"/:streamId",onEnter:["$rootScope","$stateParams","$state","$modal",function(e,t,a,r){var n=e.$new();n.streamId=t.streamId,r({template:"/assets/features/flows/templates/tabs/runs/streams/detail.html",scope:n}).$promise.then(function(){a.go("^",a.params)})}],ncyBreadcrumb:{skip:!0}}).state("flows.detail.runs.tabs.data",{url:"/data",templateUrl:"/assets/features/flows/templates/tabs/runs/data.html",ncyBreadcrumb:{skip:!0}}).state("flows.detail.runs.tabs.configuration",{url:"/configuration",templateUrl:"/assets/features/flows/templates/tabs/runs/configuration.html",ncyBreadcrumb:{skip:!0}}).state("flows.detail.runs.tabs.log",{url:"/logs?filter",reloadOnSearch:!1,controller:"FlowsRunLogController",template:'<my-log-viewer data-model="logs"></my-log-viewer>',ncyBreadcrumb:{skip:!0}}).state("flows.detail.schedules",{url:"/schedules",templateUrl:"/assets/features/flows/templates/tabs/schedules.html",ncyBreadcrumb:{skip:!0}}).state("flows.detail.metadata",{url:"/metadata",templateUrl:"/assets/features/flows/templates/tabs/metadata.html",ncyBreadcrumb:{skip:!0}}).state("flows.detail.history",{url:"/history",templateUrl:"/assets/features/flows/templates/tabs/history.html",ncyBreadcrumb:{parent:"apps.detail.overview",label:"{{$state.params.programId}} / History"}}).state("flows.detail.resources",{url:"/resources",templateUrl:"/assets/features/flows/templates/tabs/resources.html",ncyBreadcrumb:{skip:!0}})}])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".feature.foo").controller("FooPlaygroundController",["$scope","$q","mySessionStorage","myLocalStorage","mySettings",function(e,t,a,r,n){var s=[{n:"Session",v:a},{n:"Local",v:r},{n:"Settings",v:n}],o="feature.foo.test-settings";t.all(s.map(function(e){return e.v.get(o)})).then(function(t){for(var a,r=0;r<t.length;r++)a=s[r],e[a.n.toLowerCase()]=t[r],e["doSave"+a.n]=function(){this.v.set(o,e[this.n.toLowerCase()])}.bind(a)})}])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".feature.foo").config(["$stateProvider","MYAUTH_ROLE",function(e){e.state("foo",{url:"/foo",templateUrl:"/assets/features/foo/foo.html"}).state("test-edwin",{url:"/test/edwin",templateUrl:"/assets/features/foo/edwin.html",controller:["$scope","$timeout",function(e,t){e.testNumber=1e4,e.data={},t(function(){e.data={nodes:["one","two","three","four","five","whew","err","six","seven"],edges:[{sourceName:"one",targetName:"three"},{sourceName:"two",targetName:"three"},{sourceName:"three",targetName:"four"},{sourceName:"three",targetName:"five"},{sourceName:"whew",targetName:"seven"},{sourceName:"four",targetName:"seven"},{sourceName:"six",targetName:"seven"},{sourceName:"err",targetName:"seven"},{sourceName:"five",targetName:"six"},{sourceName:"two",targetName:"seven"},{sourceName:"four",targetName:"six"}]}},3e3)}]}).state("test-settings",{url:"/test/settings",templateUrl:"/assets/features/foo/settings.html",controller:"FooPlaygroundController"})}])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".feature.home").config(["$stateProvider","$urlRouterProvider","MYAUTH_ROLE",function(e,t){t.otherwise(function(e,t){e.get("$state").go(t.path()?"404":"home")}),e.state("home",{url:"/",templateUrl:"/assets/features/home/home.html"}).state("ns",{url:"/ns/:namespace","abstract":!0,template:"<ui-view/>",resolve:{rNsList:["myNamespace",function(e){return e.getList()}]},controller:["$state","rNsList","mySessionStorage",function(e,t,a){var r=t.filter(function(t){return t.id===e.params.namespace}),n="feature.home.ns.latest";r.length?a.set(n,e.params.namespace):a.get(n).then(function(a){var r=a||t[0].id;console.warn("invalid namespace, defaulting to ",r),e.go(e.current,{namespace:r},{reload:!0})})}]}).state("404",{templateUrl:"/assets/features/home/404.html"})}])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".feature.login").controller("LoginCtrl",["$scope","myAuth","$alert","$state","cfpLoadingBar","$timeout","MYAUTH_EVENT","MY_CONFIG","caskFocusManager",function(e,t,a,r,n,s,o,l,i){function u(){s(function(){i.select(e.credentials.username?"password":"username")},10)}e.credentials=t.remembered(),e.submitting=!1,e.doLogin=function(a){e.submitting=!0,n.start(),t.login(a)["finally"](function(){e.submitting=!1,n.complete()})},e.$on("$viewContentLoaded",function(){t.isAuthenticated()?(a({content:"You are already logged in!",type:"warning"}),r.go("overview")):l.securityEnabled?u():t.login({username:"admin"})}),e.$on(o.loginFailed,u)}])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".feature.login").config(["$stateProvider","$urlRouterProvider",function(e){e.state("login",{url:"/login?next",templateUrl:"/assets/features/login/login.html",controller:"LoginCtrl"})}]).run(["$rootScope","$state","$alert","$location","MYAUTH_EVENT",function(e,t,a,r,n){e.$on(n.loginSuccess,function(){var a=t.is("login")&&t.params.next;a?(a=angular.fromJson(a),console.log("After login, will redirect to:",a),e.$applyAsync(function(){r.path(a.path).search(a.search).replace()})):t.go("overview")})}]).run(["$rootScope","$state","$alert","MYAUTH_EVENT","MY_CONFIG",function(e,t,a,r,n){e.$on(r.logoutSuccess,function(){a({title:"Bye!",content:"You are now logged out.",type:"info"}),t.go("login")}),e.$on(r.notAuthorized,function(){a({title:"Authentication error!",content:"You are not allowed to access the requested page.",type:"warning"})}),n.securityEnabled&&angular.forEach([{event:r.loginFailed,eventType:"danger",title:"Login Failed",message:"User Authentication failed! Please check username and password"},{event:r.sessionTimeout,eventType:"danger",title:"Session Timeout",message:"Your current session has timed out. Please login again."},{event:r.notAuthenticated,eventType:"danger",title:"Authentication required",message:"This page needs user to be authenticated. Please login to this page."},{event:r.loginSuccess,eventType:"success",title:"Login Success!",message:"You have been authenticated!"}],function(t){e.$on(t.event,function(){a({title:t.title,content:t.message,type:t.eventType})})})}])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".feature.mapreduce").config(["$stateProvider","$urlRouterProvider","MYAUTH_ROLE",function(e,t,a){e.state("mapreduce",{url:"/mapreduce","abstract":!0,parent:"programs",data:{authorizedRoles:a.all,highlightTab:"development"},template:"<ui-view/>"}).state("mapreduce.list",{url:"/list",templateUrl:"/assets/features/mapreduce/templates/list.html",controller:"MapreduceListController",ncyBreadcrumb:{parent:"apps.detail.overview",label:"Mapreduce"}}).state("mapreduce.detail",{url:"/:programId",templateUrl:"/assets/features/mapreduce/templates/detail.html",controller:"MapreduceDetailController",onEnter:["$state","$timeout",function(e,t){t(function(){e.is("mapreduce.detail")&&e.go("mapreduce.detail.runs")})}],ncyBreadcrumb:{parent:"apps.detail.overview",label:"{{$state.params.programId}}"}}).state("mapreduce.detail.runs",{url:"/runs",templateUrl:"/assets/features/mapreduce/templates/tabs/runs.html",controller:"MapreduceDetailRunController",ncyBreadcrumb:{skip:!0}}).state("mapreduce.detail.runs.tab",{url:"/:runId",template:"<ui-view/>","abstract":!0}).state("mapreduce.detail.runs.tab.status",{url:"/status",template:'<div class="well well-lg text-center"><div> Mapreduce: Status - Work In Progress</div> </div>',ncyBreadcrumb:{parent:"apps.detail.overview",label:"{{$state.params.programId}} / {{$state.params.runId}}"}}).state("mapreduce.detail.runs.tab.distribution",{url:"/distribution",template:"<div> Distribution: {{$state.params.runId}} </div>",ncyBreadcrumb:{skip:!0}}).state("mapreduce.detail.runs.tab.list",{url:"/list",template:"<div> List: {{$state.params.runId}} </div>",ncyBreadcrumb:{skip:!0}}).state("mapreduce.detail.runs.tab.data",{url:"/data",template:"<div> Data: {{$state.params.runId}} </div>",ncyBreadcrumb:{skip:!0}}).state("mapreduce.detail.runs.tab.configuration",{url:"/configuration",template:"<div> Configuration: {{$state.params.runId}} </div>",ncyBreadcrumb:{skip:!0}}).state("mapreduce.detail.runs.tab.logs",{url:"/logs?filter",reloadOnSearch:!1,template:'<my-log-viewer data-model="logs"></my-log-viewer>',controller:"MapreduceRunLogController",ncyBreadcrumb:{skip:!0}}).state("mapreduce.detail.schedules",{url:"/schedules",templateUrl:"/assets/features/mapreduce/templates/tabs/schedules.html",ncyBreadcrumb:{skip:!0}}).state("mapreduce.detail.metadata",{url:"/metadata",templateUrl:"/assets/features/mapreduce/templates/tabs/metadata.html",ncyBreadcrumb:{skip:!0}}).state("mapreduce.detail.history",{url:"/history",templateUrl:"/assets/features/mapreduce/templates/tabs/history.html",ncyBreadcrumb:{parent:"apps.detail.overview",label:"{{$state.params.programId}} / History"}}).state("mapreduce.detail.resources",{url:"/resources",templateUrl:"/assets/features/mapreduce/templates/tabs/resources.html",ncyBreadcrumb:{skip:!0}})}])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".feature.operation28").controller("Op28CdapCtrl",["$scope","$state","op28helper","MyDataSource",function(e,t,a,r){var n=new r(e);e.panels=[["Collect","EPS","collect.events"],["Process","%","process.busyness"],["Store","/S","dataset.store.bytes",!0],["Query","QPS","query.requests"]].map(a.panelMap),angular.forEach(e.panels,function(e){var t=e.chart;n.poll({_cdapPathV2:"/metrics/system/"+t.metric+"?start=now-60s&end=now",method:"GET"},a.pollCb.bind(t))})}]).controller("Op28SystemCtrl",["$scope","op28helper","MyDataSource",function(e,t,a){var r=new a(e);e.panels=[["AppFabric","Containers","containers"],["Processors","Cores","vcores"],["Memory","","memory",!0],["DataFabric","","storage",!0]].map(t.panelMap),angular.forEach(e.panels,function(e){var a=e.chart;r.poll({_cdapPathV2:"/metrics/system/resources.used."+a.metric+"?start=now-60s&end=now",method:"GET"},t.pollCb.bind(a))})}]).controller("Op28AppsCtrl",["$scope","$state","myHelpers","MyDataSource",function(e,t,a,r){function n(t){angular.forEach(e.apps,function(e){angular.forEach(t.series,function(t){e.id===t.grouping.app&&a.deepSet(e,"metric."+t.metricName.split(".").pop(),t.data[0].value)})})}var s=new r(e);e.apps=[],s.request({_cdapNsPath:"/apps"},function(t){e.apps=t;for(var a=["vcores","containers","memory"],r=0;r<a.length;r++)s.poll({_cdapPath:"/metrics/query?context=namespace.system&metric=system.resources.used."+a[r]+"&groupBy=app",method:"POST"},n)})}]).factory("op28helper",function(){function e(e){return{title:e[0],unit:e[1],useByteFilter:e[3],chart:{metric:e[2],context:"system",history:null,stream:null,lastValue:0}}}function t(e){var t=e.data.map(function(e){return{time:e.time,y:e.value}});this.history&&(this.stream=t.slice(-1)),this.history=[{label:this.metric,values:t}],this.lastValue=e.data.pop().value}return{panelMap:e,pollCb:t}})}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".feature.operation28").config(["$stateProvider","$urlRouterProvider","MYAUTH_ROLE",function(e,t,a){var r="/assets/features/operation28/";e.state("operations",{data:{authorizedRoles:a.all,highlightTab:"operations"},parent:"ns",url:"/operations",templateUrl:r+"ops.html",controller:["$scope","$state","MY_CONFIG",function(e,t,a){e.$on("$stateChangeSuccess",function(){t.is("operations")&&t.go("operations.cdap")}),e.isEnterprise=a.isEnterprise}]}).state("operations.cdap",{url:"/cdap",templateUrl:r+"tab/charts.html",controller:"Op28CdapCtrl"}).state("operations.system",{url:"/system",templateUrl:r+"tab/charts.html",controller:"Op28SystemCtrl"}).state("operations.apps",{url:"/apps",templateUrl:r+"tab/apps.html",controller:"Op28AppsCtrl"})}])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".feature.overview").config(["$stateProvider","$urlRouterProvider","MYAUTH_ROLE",function(e,t,a){e.state("overview",{data:{authorizedRoles:a.all,highlightTab:"development"},parent:"ns",url:"",templateUrl:"/assets/features/overview/overview.html",controller:"OverviewCtrl",ncyBreadcrumb:{label:"Home"}})}])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".feature.programs").config(["$stateProvider","$urlRouterProvider","MYAUTH_ROLE",function(e,t,a){e.state("programs",{parent:"apps.detail",url:"/programs",data:{authorizedRoles:a.all,highlightTab:"development"},template:"<ui-view/>","abstract":!0})}])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".feature.services").config(["$stateProvider","$urlRouterProvider","MYAUTH_ROLE",function(e,t,a){e.state("services",{url:"/services","abstract":!0,parent:"programs",data:{authorizedRoles:a.all,highlightTab:"development"},template:"<ui-view/>"}).state("services.list",{url:"/list",templateUrl:"/assets/features/services/templates/list.html",controller:"ServicesListController",ncyBreadcrumb:{parent:"apps.detail.overview",label:"Services"}}).state("services.detail",{url:"/:programId",templateUrl:"/assets/features/services/templates/detail.html",onEnter:["$state","$timeout",function(e,t){t(function(){e.is("services.detail")&&e.go("services.detail.status")})}],ncyBreadcrumb:{parent:"apps.detail.overview",label:"{{$state.params.programId}}"}}).state("services.detail.status",{url:"/status",templateUrl:"/assets/features/services/templates/tabs/status.html",ncyBreadcrumb:{parent:"apps.detail.overview",label:"{{$state.params.programId}} / Status"}}).state("services.detail.status.makerequest",{params:{requestUrl:null,requestMethod:null},onEnter:["$state","$modal",function(e,t){var a=t({template:"/assets/features/services/templates/tabs/status/make-request.html"});a.$scope.$on("modal.hide",function(){e.go("^")})}]}).state("services.detail.data",{url:"/data",templateUrl:"/assets/features/services/templates/tabs/data.html",ncyBreadcrumb:{skip:!0}}).state("services.detail.metadata",{url:"/metadata",templateUrl:"/assets/features/services/templates/tabs/metadata.html",ncyBreadcrumb:{skip:!0}}).state("services.detail.history",{url:"/history",templateUrl:"/assets/features/services/templates/tabs/history.html",ncyBreadcrumb:{parent:"apps.detail.overview",label:"{{$state.params.programId}} / History"}}).state("services.detail.logs",{url:"/logs?filter",reloadOnSearch:!1,controller:"ServicesLogsController",template:'<my-log-viewer data-model="logs"></my-log-viewer>',ncyBreadcrumb:{parent:"apps.detail.overview",label:"{{$state.params.programId}} / Logs"}}).state("services.detail.resources",{url:"/resource",templateUrl:"/assets/features/services/templates/tabs/resources.html",ncyBreadcrumb:{skip:!0}})}])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".feature.streams").config(["$stateProvider","$urlRouterProvider","MYAUTH_ROLE",function(e,t,a){e.state("streams",{"abstract":!0,template:"<ui-view/>",url:"/streams",data:{authorizedRoles:a.all,highlightTab:"development"},parent:"ns"}).state("streams.list",{url:"",templateUrl:"/assets/features/streams/templates/list.html",controller:"CdapStreamsListController",ncyBreadcrumb:{label:"Streams",parent:"data.list"}}).state("streams.detail",{url:"/:streamId","abstract":!0,template:"<ui-view/>"}).state("streams.detail.overview",{url:"/overview",parent:"streams.detail",templateUrl:"/assets/features/streams/templates/detail.html",controller:"CdapStreamDetailController",ncyBreadcrumb:{parent:"data.list",label:"{{$state.params.streamId | caskCapitalizeFilter}}"}}).state("streams.detail.overview.tab",{url:"/:tab",ncyBreadcrumb:{skip:!0}})}])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".feature.userprofile").config(["$stateProvider","$urlRouterProvider","MYAUTH_ROLE",function(e,t,a){e.state("userprofile",{data:{authorizedRoles:a.all,highlightTab:"development"},url:"/profile",templateUrl:"/assets/features/userprofile/templates/profile.html",controller:"UserProfileController"})}])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".feature.workflows").config(["$stateProvider","$urlRouterProvider","MYAUTH_ROLE",function(e,t,a){e.state("workflows",{url:"/workflows","abstract":!0,parent:"programs",data:{authorizedRoles:a.all,highlightTab:"development"},template:"<ui-view/>"}).state("workflows.list",{url:"/list",templateUrl:"/assets/features/workflows/templates/list.html",controller:"WorkflowsListController",ncyBreadcrumb:{skip:!0}}).state("workflows.detail",{url:"/:programId",templateUrl:"/assets/features/workflows/templates/detail.html",controller:"WorkflowsDetailController",onEnter:["$state","$timeout",function(e,t){t(function(){e.is("workflows.detail")&&e.go("workflows.detail.runs")})}]}).state("workflows.detail.runs",{url:"",templateUrl:"/assets/features/workflows/templates/tabs/runs.html",controller:"WorkflowsDetailRunController",ncyBreadcrumb:{parent:"apps.detail.overview",label:"{{$state.params.programId}}"}}).state("workflows.detail.runs.tabs",{url:"/runs/:runId",template:"<ui-view/>","abstract":!0,ncyBreadcrumb:{skip:!0}}).state("workflows.detail.runs.tabs.status",{url:"/status",templateUrl:"/assets/features/workflows/templates/tabs/runs/status.html",controller:"WorkflowsDetailRunStatusController",ncyBreadcrumb:{parent:"apps.detail.overview",label:"{{$state.params.programId}} / {{$state.params.runId}}"}}).state("workflows.detail.runs.tabs.data",{url:"/data",template:'<div class="well well-lg text-center"><div> Workflow: Data - Work In Progress</div> </div>',ncyBreadcrumb:{parent:"apps.detail.overview",label:"{{$state.params.programId}} / {{$state.params.runId}}"}}).state("workflows.detail.runs.tabs.configuration",{url:"/configuration",template:'<div class="well well-lg text-center"><div> Workflow: Configuration - Work In Progress</div> </div>',ncyBreadcrumb:{parent:"apps.detail.overview",label:"{{$state.params.programId}} / {{$state.params.runId}}"}}).state("workflows.detail.runs.tabs.log",{url:"/log",template:'<div class="well well-lg text-center"><div> Workflow: Log - Work In Progress</div> </div>',ncyBreadcrumb:{parent:"apps.detail.overview",label:"{{$state.params.programId}} / {{$state.params.runId}}"}}).state("workflows.detail.schedules",{url:"/schedules",templateUrl:"/assets/features/workflows/templates/tabs/schedules.html",ncyBreadcrumb:{parent:"apps.detail.overview",label:"{{$state.params.programId}}"}}).state("workflows.detail.metadata",{url:"/metadata",templateUrl:"/assets/features/workflows/templates/tabs/metadata.html",ncyBreadcrumb:{parent:"apps.detail.overview",label:"{{$state.params.programId}}"}}).state("workflows.detail.history",{url:"/history",templateUrl:"/assets/features/workflows/templates/tabs/history.html",ncyBreadcrumb:{parent:"apps.detail.overview",label:"{{$state.params.programId}} / History"}}).state("workflows.detail.resources",{url:"/resources",templateUrl:"/assets/features/workflows/templates/tabs/resources.html",ncyBreadcrumb:{parent:"apps.detail.overview",label:"{{$state.params.programId}}"}})}])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".services").factory("myCdapUrl",["$stateParams","$log","MY_CONFIG",function(e,t,a){function r(t){var r;if(t._cdapNsPath){var n=e.namespace;if(!n)throw new Error("_cdapNsPath requires $stateParams.namespace to be defined");t._cdapPath=["/namespaces/",n,t._cdapNsPath].join(""),delete t._cdapNsPath}return(t._cdapPath||t._cdapPathV2)&&(r=["http://",a.cdap.routerServerUrl,":",a.cdap.routerServerPort,t._cdapPathV2?"/v2":"/v3",t._cdapPath||t._cdapPathV2].join(""),delete t._cdapPath,delete t._cdapPathV2),r}return{constructUrl:r}}])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".services").factory("MyDataSource",["$state","$log","$rootScope","caskWindowManager","mySocket","MYSOCKET_EVENT","$q",function(e,t,a,r,n,s,o){function l(e){n.send({action:"poll-start",resource:e})}function i(e){n.send({action:"poll-stop",resource:e})}function u(e){e=e||a.$new();var t=e.$id,n=this;if(c[t])throw new Error("multiple DataSource for scope",t);c[t]=n,this.bindings=[],e.$on(s.message,function(t,a){return 200!==a.statusCode||a.warning?void angular.forEach(n.bindings,function(t){angular.equals(t.resource,a.resource)&&t.errorCallback&&e.$apply(t.errorCallback.bind(null,a.response))}):void angular.forEach(n.bindings,function(t){angular.equals(t.resource,a.resource)&&e.$apply(t.callback.bind(null,a.response))})}),e.$on("$destroy",function(){delete c[t]}),e.$on(r.event.blur,function(){angular.forEach(n.bindings,function(e){e.poll&&i(e.resource)})}),e.$on(r.event.focus,function(){angular.forEach(n.bindings,function(e){e.poll&&l(e.resource)})}),this.scope=e}var c={};return a.$on(s.reconnected,function(){t.log("[DataSource] reconnected, reloading..."),e.transitionTo(e.current,e.$current.params,{reload:!0,inherit:!0,notify:!0})}),u.prototype.poll=function(e,t){this.bindings.push({poll:!0,resource:e,callback:t}),this.scope.$on("$destroy",function(){i(e)}),l(e)},u.prototype.request=function(e,t){var a=!1,r=o.defer();return this.bindings.push({resource:e,callback:function(e){a||(a=!0,t&&t.apply(this,arguments),r.resolve(e))},errorCallback:function(e){a||(a=!0,r.reject(e))}}),n.send({action:"request",resource:e}),r.promise},u}])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".services").factory("SockJS",["$window",function(e){return e.SockJS}]).constant("MYSOCKET_EVENT",{message:"mysocket-message",closed:"mysocket-closed",reconnected:"mysocket-reconnected"}).provider("mySocket",function(){this.prefix="/_sock",this.$get=["MYSOCKET_EVENT","myAuth","$rootScope","SockJS","$log","MY_CONFIG","myCdapUrl",function(e,t,a,r,n,s,o){function l(t){n.log("[mySocket] init"),t=t||1,m=new r(c.prefix),m.onmessage=function(t){try{var r=JSON.parse(t.data);n.log("[mySocket] ←",r),a.$broadcast(e.message,r)}catch(s){n.error(s)}},m.onopen=function(r){t>1&&(a.$broadcast(e.reconnected,r),t=1),n.info("[mySocket] opened"),angular.forEach(d,i),d=[]},m.onclose=function(r){n.error(r.reason),2>t&&a.$broadcast(e.closed,r);var s=Math.max(500,Math.round(500*(Math.random()+1)*Math.pow(2,t)));n.log("[mySocket] will try again in ",s+"ms"),setTimeout(function(){l(t+1)},s)}}function i(e){return m.readyState?(u(e),!0):(d.push(e),!1)}function u(e){var a=angular.extend({user:t.currentUser||null},e),r=e.resource;r&&(a.resource=r,a.resource.json=!0,r.url||(a.resource.url=o.constructUrl(a.resource)),r.method||(a.resource.method="GET"),s.securityEnabled&&(a.resource.headers=angular.extend(r.headers||{},{authorization:"Bearer "+t.currentUser.token})),n.log("[mySocket] →",a.action,r.method,r.url)),m.send(JSON.stringify(a))}var c=this,m=null,d=[];return l(),{init:l,send:i,close:function(){return m.close.apply(m,arguments)}}}]})}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".feature.admin").controller("AdminController",["$scope","$state","myNamespace",function(e,t,a){function r(){e.submenu.security||(e.submenu.security=t.is("admin.security")||t.includes("admin.security.**")),e.submenu.system||(e.submenu.system=t.is("admin.system")||t.includes("admin.system.**")),e.submenu.namespaces||(e.submenu.namespaces=t.is("admin.namespace")||t.includes("admin.namespace.**")),t.params.nsadmin&&(e.submenu.perNs[t.params.nsadmin]=!0)}a.getList().then(function(t){e.nsList=t,r()}),e.submenu={system:!1,security:!1,namespaces:!1,perNs:{}},e.$on("$stateChangeSuccess",r)}])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".feature.admin").controller("AdminOverviewController",["$scope","$state","myNamespace","MyDataSource","myLocalStorage","MY_CONFIG",function(e,t,a,r,n,s){function o(e){return l.request({_cdapPath:"/namespaces/"+e.id+"/apps"})}var l=new r(e),i="feature.admin.overview.welcomeIsHidden";n.get(i).then(function(t){e.welcomeIsHidden=t}),e.hideWelcome=function(){n.set(i,!0),e.welcomeIsHidden=!0},e.isEnterprise=s.isEnterprise,a.getList().then(function(t){e.nsList=t,e.nsList.forEach(function(e){o(e).then(function(t){e.appsCount=t.length})})})}])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".feature.admin").controller("AdminAuditLogsController",["$scope",function(e){e.logs=[{dateTime:"01/28/2015",version:"1.0",action:"test",user:"xyz",status:"inactive"}]}])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".feature.admin").controller("AdminDatasetsController",["$scope",function(e){e.datasets=[{name:"STU",type:"Stream",description:"little miss muffet",apps:"2"}]}])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".feature.admin").controller("AdminDatatypesController",["$scope",function(e){e.datatypes=[{name:"counter",className:"core",description:"goldilocks and the 3 bears",instances:"2",apps:"5"}]}])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".feature.admin").controller("AdminInstanceController",["$scope",function(e){e.instance=[{id:"1984",key:"string",value:"abcdefg"}]}])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".feature.admin").controller("AdminNamespaceAppController",["$scope","$state","myAppUploader","MyDataSource","myNamespace",function(e,t,a,r,n){e.apps=[],e.nsname=n.getDisplayName(t.params.nsadmin);var s=new r(e);s.request({_cdapPath:"/namespaces/"+t.params.nsadmin+"/apps"}).then(function(t){e.apps=t}),e.onFileSelected=function(e){a.upload(e,t.params.nsadmin)}}])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".feature.admin").controller("AdminNamespaceAppMetadataController",["$scope","$state","$alert","$timeout","MyDataSource",function(e,t,a,r,n){var s=new n(e),o="/namespaces/"+t.params.nsadmin+"/apps/"+t.params.appId;s.request({_cdapPath:o}).then(function(t){e.apps=t}),e.deleteApp=function(e){s.request({_cdapPath:o,method:"DELETE"},function(){a({type:"success",title:e,content:"App deleted successfully"}),r(function(){t.go("^.apps")})})}}])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".feature.admin").controller("AdminNamespaceCreateController",["$scope","$alert","MyDataSource","myNamespace",function(e,t,a,r){e.model={name:"",description:""};var n=new a(e);e.submitHandler=function(){n.request({method:"PUT",_cdapPath:"/namespaces/"+e.model.id,body:{id:e.model.id,name:e.model.name||null,description:e.model.description}}).then(function(){t({title:"Success!",content:"Namespace Created!",type:"success"}),r.getList(!0)})}}])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".feature.admin").controller("AdminNamespaceMetadataController",["$scope","$state","$alert","MyDataSource","myNamespace",function(e,t,a,r,n){e.nsname=n.getDisplayName(t.params.nsadmin);var s=new r(e),o="/namespaces/"+t.params.nsadmin;s.request({_cdapPath:o}).then(function(t){e.metadata=t}),e.doSave=function(){a({title:"it doesn't work yet!",content:"there is no content yet",type:"warning"})}}])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".feature.admin").controller("AdminServiceDetailController",["$scope","$state","MyDataSource",function(e,t,a){e.basePath="/system/services/"+t.params.serviceName;var r=new a(e);r.request({_cdapPathV2:e.basePath+"/instances"}).then(function(t){e.instances=t}),e.tabs=[],e.tabs.activeTab=t.is("admin.system.services.detail")?0:t.is("admin.system.services.detail.metadata")?0:1,e.$watch("tabs.activeTab",function(e){var a=t.includes("admin.system.services.detail.*")?"^":"";0===e?t.go(a+".metadata"):1===e&&t.go(a+".logs")})}])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".feature.admin").controller("AdminServiceLogController",["$scope","$state","MyDataSource",function(e,t,a){var r=new a(e);r.request({_cdapPathV2:"/system/services/"+encodeURIComponent(t.params.serviceName)+"/logs/next?fromOffset=-1&maxSize=50"}).then(function(t){e.logs=t})}])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".feature.admin").controller("AdminServicesController",["$scope","MyDataSource",function(e,t){e.services=[];var a=new t(e);a.request({_cdapPathV2:"/system/services"}).then(function(t){e.services=t})}])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".feature.apps").controller("CdapAppListController",["$timeout","$scope","MyDataSource","myAppUploader","$alert","$state",function(e,t,a,r,n,s){var o=new a(t);o.request({_cdapNsPath:"/apps/"}).then(function(e){t.apps=e}),t.onFileSelected=r.upload,t.deleteApp=function(t){o.request({_cdapNsPath:"/apps/"+t,method:"DELETE"},function(){n({type:"success",title:t,content:"App deleted successfully"}),e(s.reload)
})}}])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".feature.dashboard").controller("DashboardAddWdgtCtrl",["$scope","caskFocusManager","Widget",function(e,t,a){t.focus("addWdgtType"),e.model=new a,e.widgetTypes=[{name:"Timeseries (line)",type:"line"},{name:"Histogram (bar)",type:"bar"},{name:"Timeseries (area)",type:"area"},{name:"Pie Chart",type:"pie"},{name:"Debug",type:"json"}],e.$watch("model.metric.name",function(t){t&&(e.model.title=t)}),e.doAddWidget=function(){e.currentDashboard.addWidget(e.model),e.$hide()}}])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".feature.dashboard").controller("DashboardCtrl",["$scope","$state","$dropdown","rDashboardsModel",function(e,t,a,r){function n(){var a=parseInt(t.params.tab,10)||0;(0>a||a>=e.dashboards.length)&&(a=0),e.dashboards.activeIndex!==a&&(e.dashboards.activeIndex=a),e.currentBoard=r.current()}e.dashboards=r.data,r.data.length||r.add(),e.$watch("dashboards.activeIndex",function(e){t.go(t.current,{tab:e})}),e.$on("$stateChangeSuccess",n),n(),e.activeTabClick=function(t){var r=angular.element(t.target);if(r.hasClass("dropdown-toggle")||(r=r.parent()),!r.parent().hasClass("open")){var n=e.$new(),s=a(r,{template:"assets/features/dashboard/partials/tab-dd.html",animation:"am-flip-x",trigger:"manual",prefixEvent:"dashboard-tab-dd",scope:n});s.$promise.then(function(){s.show()}),n.$on("dashboard-tab-dd.hide",function(){s.destroy()})}},e.addDashboard=function(e){r.add({title:e}).then(function(){t.go(t.current,{tab:0},{reload:!0})})},e.removeDashboard=function(){r.remove(e.dashboards.activeIndex)},e.reorderDashboard=function(e){var a=r.reorder(e);t.go(t.current,{tab:a},{reload:!0})},e.dragdrop={dragStart:function(e){console.log("dragStart",e.source,e.dest)},dragEnd:function(e){console.log("dragEnd",e.source,e.dest),r.current().persist()}}}])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".feature.datasets").controller("CdapDatasetsListController",["$scope","MyDataSource",function(e,t){var a=new t(e);a.request({_cdapNsPath:"/data/datasets"}).then(function(t){e.datasets=t})}])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".feature.flows").controller("FlowsDetailController",["$scope","$state","$timeout","MyDataSource",function(e,t,a,r){var n=new r(e),s="/apps/"+t.params.appId+"/flows/"+t.params.programId;e.activeRuns=0,e.runs=null,n.poll({_cdapNsPath:s+"/runs"},function(t){e.runs=t;var a=0;angular.forEach(t,function(e){"RUNNING"===e.status&&(a+=1)}),e.activeRuns=a}),n.poll({_cdapNsPath:s+"/status"},function(t){e.status=t.status}),e.toggleFlow=function(t){e.status=t,n.request({method:"POST",_cdapNsPath:s+"/"+t})}}])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".feature.flows").controller("FlowsListController",["$scope","$stateParams","MyDataSource",function(e,t,a){function r(e){var t=e.id;n.poll({_cdapNsPath:s+"/"+t+"/status"},function(t){e.status=t.status})}var n=new a(e),s="/apps/"+t.appId+"/flows";n.request({_cdapNsPath:s}).then(function(t){e.flows=t,t.forEach(r)}),e.doProgram=function(t,a){var r=e.flows.filter(function(e){return e.id===t});r[0].status="UPDATING",n.request({_cdapNsPath:s+"/"+t+"/"+a,method:"POST"})}}])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".feature.mapreduce").controller("MapreduceDetailController",["MyDataSource","$state","$scope",function(e,t,a){var r=new e(a),n="/apps/"+t.params.appId+"/mapreduce/"+t.params.programId;a.runs=null,r.poll({_cdapNsPath:n+"/runs"},function(e){a.runs=e,a.activeRuns=(e.map(function(e){return"RUNNING"===e.status?1:0})||[]).reduce(function(e,t){return e+t})}),r.poll({_cdapNsPath:n+"/status"},function(e){a.status=e.status}),a.toggleFlow=function(e){a.status=e,r.request({method:"POST",_cdapNsPath:n+"/"+e})}}])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".feature.mapreduce").controller("MapreduceListController",["$scope","$state","$stateParams","MyDataSource",function(e,t,a,r){function n(e){var t=e.id;s.poll({_cdapNsPath:o+"/"+t+"/status"},function(t){e.status=t.status})}var s=new r(e),o="/apps/"+a.appId+"/mapreduce";e.mapreduceList=[],s.request({_cdapNsPath:o},function(t){e.mapreduceList=t,t.forEach(n)}),e.doProgram=function(e,t){s.request({_cdapNsPath:o+"/"+e+"/"+t,method:"POST"})}}])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".feature.overview").controller("AppsSectionCtrl",["$scope","myAppUploader",function(e,t){e.onFileSelected=t.upload}])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".feature.overview").controller("OverviewCtrl",["$scope","MyDataSource","$state","myLocalStorage","MY_CONFIG",function(e,t,a,r,n){if(a.params.namespace){e.apps=[],e.datasets=[],e.hideWelcomeMessage=!1;var s=new t(e),o="/assets/features/overview/templates/",l="feature.overview.welcomeIsHidden";r.get(l).then(function(t){e.welcomeIsHidden=t}),e.hideWelcome=function(){r.set(l,!0),e.welcomeIsHidden=!0},e.isEnterprise=n.isEnterprise,s.request({_cdapNsPath:"/apps"}).then(function(t){e.apps=t;var a=angular.isArray(e.apps)&&e.apps.length;e.appsTemplate=o+(a?"apps-section.html":"apps-empty-section.html")}),s.request({_cdapNsPath:"/data/datasets"}).then(function(t){e.datasets=t;var a=angular.isArray(e.datasets)&&e.datasets.length;e.dataTemplate=o+(a?"data-section.html":"data-empty-section.html")}),s.request({_cdapNsPath:"/streams"},function(t){angular.isArray(t)&&t.length&&(e.streams=t)})}}])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".feature.services").controller("ServicesListController",["$scope","$stateParams","MyDataSource",function(e,t,a){function r(e){var t=e.id;n.poll({_cdapNsPath:s+"/"+t+"/status"},function(t){e.status=t.status})}var n=new a(e),s="/apps/"+t.appId+"/services";e.services=[],n.request({_cdapNsPath:s}).then(function(t){e.services=t,t.forEach(r)}),e.doProgram=function(e,t){n.request({_cdapNsPath:s+"/"+e+"/"+t,method:"POST"})}}])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".feature.streams").controller("CdapStreamDetailController",["$scope","MyDataSource","$state",function(e,t){new t(e);e.dropdown=[{text:"Action",href:"#"},{text:"Action1",href:"#"}]}])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".feature.streams").controller("CdapStreamsListController",["$scope","MyDataSource",function(e,t){var a=new t(e);a.request({_cdapNsPath:"/streams"}).then(function(t){e.streams=t})}])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".feature.userprofile").controller("UserProfileController",["$scope","$http","$alert","myAuth",function(e,t,a,r){e.reAuthenticated=!1,e.credentials={username:r.currentUser.username},e.readonlyUsername=!0,e.doLogin=function(r){t({method:"POST",url:"/accessToken",data:{username:r.username,password:r.password}}).success(function(t){e.token=t.access_token,e.expirationTime=Date.now()+1e3*t.expires_in,e.reAuthenticated=!0}).error(function(){a({title:"User Authentication Error!",content:"Either Username or Password is wrong. Please try again",type:"danger"})})}}])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".feature.workflows").controller("WorkflowsDetailController",["$scope","$state","$timeout","MyDataSource",function(e,t,a,r){var n=new r(e),s="/apps/"+t.params.appId+"/workflows/"+t.params.programId;e.activeRuns=0,e.runs=null,n.poll({_cdapNsPath:s+"/runs"},function(t){e.runs=t;var a=0;angular.forEach(t,function(e){"RUNNING"===e.status&&(a+=1)}),e.activeRuns=a}),n.poll({_cdapNsPath:s+"/status"},function(t){e.status=t.status}),e.toggleFlow=function(t){e.status=t,n.request({method:"POST",_cdapNsPath:s+"/"+t})}}])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".feature.apps").controller("CdapAppDetailStatusController",["$state","$scope","$stateParams","MyDataSource",function(e,t,a,r){function n(e,a){o.poll({_cdapNsPath:s+"/"+e+"/"+a+"/status"},function(e){var r=t.programs.filter(function(e){return e.name===a});r[0].status=e.status})}var s="/apps/"+a.appId;t.programs=[];var o=new r(t);o.request({_cdapNsPath:s}).then(function(e){e.programs.forEach(function(e){e.type_plural=e.type+(-1===["Mapreduce","Spark"].indexOf(e.type)?"s":""),n(e.type_plural.toLowerCase(),e.name)}),t.programs=e.programs}),t.goToDetail=function(t,a){e.go(t.toLowerCase()+".detail",{programId:a})},t.goToList=function(t){e.go(t.toLowerCase()+".list")}}])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".feature.datasets").controller("CdapDatasetExploreController",["$scope","MyDataSource","$state","myHelpers","$log",function(e,t){var a=new t(e);e.activePanel=0,a.request({_cdapNsPath:"/data/explore/tables"}).then(function(t){e.tables=t})}])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".feature.datasets").controller("CdapDatasetDetailStatusController",["$scope","MyDataSource","$state","myHelpers","$log",function(e,t,a,r,n){function s(t){var n="/metrics/query?metric="+t.name+"&context=namespace."+a.params.namespace+".dataset."+a.params.datasetId+"&start=now-1s&end=now-1s&resolution=1s";l.poll({_cdapPath:n,method:"POST"},function(a){var n=r.objectQuery(a,"series",0,"data",0,"value");e[t.scopeProperty]=n})}function o(e){return e.reduce(function(e,t){return angular.isArray(e)?t+" | "+o(e):angular.isObject(e)?e.items?t+" | ("+o(e.items)+")":t+" | "+e.name+" ["+e.type+"] ":t+" | "+e})}e.writes=0,e.reads=0,e.transactions=0;var l=new t(e),i=a.params.datasetId;[{name:"system.dataset.store.bytes",scopeProperty:"storage"},{name:"system.dataset.store.reads",scopeProperty:"reads"},{name:"system.dataset.store.writes",scopeProperty:"writes"}].forEach(s);var u=r.objectQuery;l.request({_cdapNsPath:"/data/datasets"}).then(function(t){var a=t.filter(function(e){return e.name.indexOf(i)>-1});try{e.schema=(u(JSON.parse(u(a,0,"properties","schema")||null),"fields")||[]).map(function(e){return angular.isArray(e.type)&&(e.type=o(e.type)),e})}catch(r){n.error("Parsing schema for datasets failed! - "+r)}})}])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".feature.flows").controller("FlowsDetailRunController",["$scope","$state","MyDataSource","$timeout",function(e,t,a,r){function n(){return e.runTabs.indexOf(t.current.name.split(".").slice(-1).pop())}var s=new a(e),o="/apps/"+t.params.appId+"/flows/"+t.params.programId;e.runTabs=["status","log"],e.runs=null,e.currentRun=null,s.request({_cdapNsPath:o+"/runs"}).then(function(a){e.runs=a,e.currentRun=0===a.length?"dormant-run":t.params.runId||a[0].runid}),e.$watch("runTabs.activeTab",function(a){var s;s=angular.isDefined(a)?a:n()>0?n():0,r(function(){t.go("flows.detail.runs.tabs."+e.runTabs[s])})}),e.$watch("currentRun",function(a){var s,o;a?(s=t.includes("**.runs.tabs.**")?t.current:"flows.detail.runs.tabs.status",r(function(){t.go(s,{runId:a})})):(e.currentRun=t.params.runId,o=n(),e.runTabs.activeTab=o>0?o:0)}),e.$on("$stateChangeSuccess",function(a,r){var n;t.includes("flows.detail.runs.tabs.**")&&(n=e.runTabs.indexOf(r.name.split(".").slice(-1).pop()),e.runTabs.activeTab=n>0?n:0)})}])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".feature.mapreduce").controller("MapreduceRunLogController",["$scope","MyDataSource","$state",function(e,t,a){var r=new t(e),n="/apps/"+a.params.appId+"/mapreduce/"+a.params.programId;e.logs=[],r.poll({_cdapNsPath:n+"/logs/next?fromOffset=-1&maxSize=50"},function(t){e.logs=t})}])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".feature.mapreduce").controller("MapreduceDetailRunController",["MyDataSource","$scope","$state","$timeout",function(e,t,a,r){function n(){return t.runTabs.indexOf(a.current.name.split(".").slice(-1).pop())}var s=new e(t),o="/apps/"+a.params.appId+"/mapreduce/"+a.params.programId;t.runTabs=["status","logs"],t.runs=null,t.currentRun=null,s.request({_cdapNsPath:o+"/runs"}).then(function(e){t.runs=e,t.currentRun=0===e.length?"dormant-run":a.params.runId||e[0].runid}),t.$watch("runTabs.activeTab",function(e){var s;s=angular.isDefined(e)?e:n()>0?n():0,r(function(){a.go("mapreduce.detail.runs.tab."+t.runTabs[s])})}),t.$watch("currentRun",function(e){var s,o;e?(s=a.includes("**.runs.tab.**")?a.current:"mapreduce.detail.runs.tab.status",r(function(){a.go(s,{runId:e})})):(t.currentRun=a.params.runId,o=n(),t.runTabs.activeTab=o>0?o:0)}),t.$on("$stateChangeSuccess",function(e,r){var n;a.includes("flows.detail.runs.tab.*")&&(n=t.runTabs.indexOf(r.name.split(".").slice(-1).pop()),t.runTabs.activeTab=n>0?n:0)})}])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".feature.services").controller("ServicesDetailHistoryController",["$scope","MyDataSource","$state",function(e,t,a){var r=new t(e);e.runs=null,r.request({_cdapNsPath:"/apps/"+a.params.appId+"/services/"+a.params.programId+"/runs"}).then(function(t){e.runs=t})}])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".feature.services").controller("ServicesLogsController",["$scope","$state","MyDataSource",function(e,t,a){var r=new a(e),n="/apps/"+t.params.appId+"/services/"+t.params.programId;e.logs=[],r.poll({_cdapNsPath:n+"/logs/next?fromOffset=-1&maxSize=50"},function(t){e.logs=t})}])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".feature.services").controller("ServicesDetailStatusController",["$state","$scope","MyDataSource",function(e,t,a){var r=new a(t),n="/apps/"+e.params.appId+"/services/"+e.params.programId;t.endPoints=[],t.instances={},t.status="",r.request({_cdapNsPath:n}).then(function(e){angular.forEach(e.handlers,function(e){t.endPoints=t.endPoints.concat(e.endpoints)}),t.instances=e.instances}),r.request({_cdapNsPath:n+"/instances"}).then(function(e){t.instances=e}),r.poll({_cdapNsPath:n+"/status"},function(e){t.status=e.status||"Unknown"}),t.start=function(){t.status="STARTING",r.request({_cdapNsPath:n+"/start",method:"POST"})},t.stop=function(){t.status="STOPPING",r.request({_cdapNsPath:n+"/stop",method:"POST"})}}])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".feature.streams").controller("StreamsDetailStatusController",["$scope","$state","myHelpers","MyDataSource",function(e,t,a,r){function n(r){var n="/metrics/query?metric="+r.name+"&context=ns."+t.params.namespace+".stream."+t.params.streamId;s.request({_cdapPath:n,method:"POST"}).then(function(t){var n=a.objectQuery(t,"series",0,"data",0,"value");e[r.scopeProperty]=n})}var s=new r(e);s.request({_cdapNsPath:"/streams/"+t.params.streamId}).then(function(t){e.schema=t.format.schema.fields}),[{name:"system.collect.bytes",scopeProperty:"storage"},{name:"system.collect.events",scopeProperty:"events"}].forEach(n)}])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".feature.workflows").controller("WorkflowsDetailRunController",["$scope","$state","MyDataSource","$timeout",function(e,t,a,r){function n(){return e.runTabs.indexOf(t.current.name.split(".").slice(-1).pop())}var s=new a(e),o="/apps/"+t.params.appId+"/workflows/"+t.params.programId;e.runTabs=["status"],e.runs=null,e.currentRun=null,s.request({_cdapNsPath:o+"/runs"}).then(function(a){e.runs=a,e.currentRun=0===a.length?"dormant-run":t.params.runId||a[0].runid}),e.$watch("runTabs.activeTab",function(a){var s;s=angular.isDefined(a)?a:n()>0?n():0,r(function(){t.go("workflows.detail.runs.tabs."+e.runTabs[s])})}),e.$watch("currentRun",function(a){var s,o;a?(s=t.includes("**.runs.detail.**")?t.current:"workflows.detail.runs.tabs.status",r(function(){t.go(s,{runId:a})})):(e.currentRun=t.params.runId,o=n(),e.runTabs.activeTab=o>0?o:0)}),e.$on("$stateChangeSuccess",function(a,r){var n;t.includes("workflows.detail.runs.tabs.*")&&(n=e.runTabs.indexOf(r.name.split(".").slice(-1).pop()),e.runTabs.activeTab=n>0?n:0)})}])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".feature.flows").controller("FlowsRunLogController",["$scope","MyDataSource","$state",function(e,t,a){var r=new t(e),n="/apps/"+a.params.appId+"/flows/"+a.params.programId;e.logs=[],r.poll({_cdapNsPath:n+"/logs/next?fromOffset=-1&maxSize=50"},function(t){e.logs=t})}])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".feature.flows").controller("FlowsDetailRunStatusController",["$state","$scope","MyDataSource","myHelpers",function(e,t,a,r){var n=new a(t),s="/apps/"+e.params.appId+"/flows/"+e.params.programId,o="/metrics/query?metric=system.process.events.processed&context=ns."+e.params.namespace+".app."+e.params.appId+".flow."+e.params.programId+".run."+e.params.runId+".flowlet.";t.data={},t.status=null,t.duration=null,t.startTime=null,n.request({_cdapNsPath:s}).then(function(e){var a=[];angular.forEach(e.connections,function(e){"STREAM"===e.sourceType&&a.push({type:e.sourceType,name:e.sourceName})}),angular.forEach(e.flowlets,function(e,t){e.type="FLOWLET",e.name=t,a.push(e)}),t.data={nodes:a,edges:e.connections,metrics:{}},angular.forEach(a,function(e){n.request({_cdapPath:o+e.name,method:"POST"}).then(function(a){t.data.metrics[e.name]=r.objectQuery(a,"series",0,"data",0,"value")||0})})}),n.poll({_cdapNsPath:s+"/runs"},function(a){angular.forEach(a,function(a){a.runid===e.params.runId&&(t.status=a.status,t.duration=a.end?a.end-a.start:Date.now()/1e3-a.start,t.startTime=1e3*a.start)})})}])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".feature.services").controller("StatusMakeRequestController",["$scope","$state","MyDataSource",function(e,t,a){function r(){e.response=null}e.programId=t.params.programId,e.requestUrl=t.params.requestUrl,e.requestMethod=t.params.requestMethod,e.urlParams=[],e.queryParams=[],e.response=null,e.postBody={};var n=/\{([\w\-]+)\}/g,s=new a(e);e.requestUrl.split("?").forEach(function(t,a){var r;0===a?t.split("/").forEach(function(t){0!==t.length&&(r=t.match(n),e.urlParams.push({key:angular.isArray(r)?r:null,value:t}))}):t.split("&").forEach(function(t){var a,r;0!==t.length&&(a=t.match(n),angular.isArray(a)?e.queryParams.push({key:a[0].substr(1,a[0].length-2),value:a[0]}):(r=t.split("="),e.queryParams.push({key:r[0],value:r[1]})))})}),e.makeRequest=function(){var a="/apps/"+t.params.appId+"/services/"+t.params.programId+"/methods";angular.forEach(e.urlParams,function(e){a=a+"/"+e.value}),angular.forEach(e.queryParams,function(e,t){a+=(0===t?"?":"&")+e.key+"="+encodeURIComponent(e.value)});var r={_cdapNsPath:a,method:e.requestMethod.toUpperCase()};("POST"===e.requestMethod||"PUT"===e.requestMethod)&&angular.extend(r,{body:e.postBody}),s.request(r).then(function(t){e.response=t})},e.$watch("queryParams",r,!0),e.$watch("urlParams",r,!0)}])}({name:"cdap-ui",v:"2.8.0"}),function(e){function t(e,t){for(var r=0;r+1<e.length;r++)0===r&&"FORK"===e[r].nodeType&&a(null,e[r],e[r+1],t),"ACTION"===e[r].nodeType&&"ACTION"===e[r+1].nodeType?t.push({sourceName:e[r].program.programName+e[r].nodeId,targetName:e[r+1].program.programName+e[r+1].nodeId,sourceType:e[r].nodeType}):"FORK"===e[r].nodeType&&a(e[r-1],e[r],e[r+1],t),r+1===e.length-1&&"FORK"===e[r+1].nodeType&&a(e[r],e[r+1],null,t)}function a(e,a,r,n){for(var s=a.branches,o=[],l=0;l<s.length;l++)o=s[l],e&&o.unshift(e),r&&o.push(r),t(o,n)}function r(e,t){for(var a=0;a<e.length;a++)if("ACTION"===e[a].nodeType)t.push(e[a]);else if("FORK"===e[a].nodeType)for(var n=0;n<e[a].branches.length;n++)r(e[a].branches[n],t)}angular.module(e.name+".feature.workflows").controller("WorkflowsDetailRunStatusController",["$state","$scope","MyDataSource","$filter",function(e,a,n,s){var o=new n(a),l=s("filter"),i="/apps/"+e.params.appId+"/workflows/"+e.params.programId;a.status=null,a.duration=null,a.startTime=null,a.data={},o.request({_cdapNsPath:i}).then(function(e){var n=[],s=[];t(angular.copy(e.nodes),n),r(e.nodes,s),s=s.map(function(e){return angular.extend({name:e.program.programName+e.nodeId,type:e.nodeType},e)}),a.data={nodes:s,edges:n,metrics:{}};var o=[];angular.forEach(e.nodes,function(e){o.push(e.program)}),a.actions=o}),a.goToDetailActionView=function(t,a){"MAPREDUCE"===a&&e.go("mapreduce.detail",{programId:t})},o.poll({_cdapNsPath:i+"/runs"},function(t){var r,n,s=l(t,{runid:e.params.runId});s.length&&(r=s[0],n=1e3*r.start,a.startTime=new Date(n),a.status=r.status,a.duration=r.end?1e3*r.end-n:0)})}])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".feature.flows").controller("FlowsFlowletDetailController",["$state","$scope",function(e,t){t.flowletId=e.params.flowletId}])}({name:"cdap-ui",v:"2.8.0"}),function(e){angular.module(e.name+".feature.flows").controller("FlowStreamDetailController",["$state","$scope","MyDataSource",function(e,t,a){var r=new a(t);t.doInject=function(){return t.userInput?(r.request({_cdapNsPath:"/streams/"+t.streamId,method:"POST",body:t.userInput}),void(t.userInput=null)):void(t.userInput=null)},t.dismiss=function(){t.$dismiss()}}])}({name:"cdap-ui",v:"2.8.0"});